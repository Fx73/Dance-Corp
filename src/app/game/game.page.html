<ion-header [translucent]="true">
	<ion-toolbar>
		<ion-title>Game</ion-title>
	</ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" [style]="'--background: url(' + backgroundUrl + ')'">
	<app-waiting-screen *ngIf="loadingMusic" [title]="music!.title" [artist]="music!.artist" [coverUrl]="music!.jacket"
		(onCountdownFinished)="handleCountdownFinished()"></app-waiting-screen>

	<ng-container *ngIf="isGameOver;then gameOverContent else gameContent"></ng-container>

	<ng-template #gameOverContent>
		<app-game-over *ngFor="let gameRound of gameRounds" [gameRound]="gameRound"></app-game-over>
		<ion-card class="base-card start-card" style="height: 15vh;" (click)="goBack()"> Back to music list
		</ion-card>
	</ng-template>

	<ng-template #gameContent>
		<app-player-display *ngFor="let gameRound of gameRounds" [gameRound]="gameRound"></app-player-display>
		<ng-container *ngIf="musicPlayerComponent" [ngComponentOutlet]="musicPlayerComponent"></ng-container>
		<!--app-music-player-youtube *ngIf="musicOrigin === MusicOrigin.Youtube" [musicUrl]="music!.music!"
			(onReady)="onPlayerReady($event)"></app-music-player-youtube-->
	</ng-template>
</ion-content>

<!--
	<div style="position: fixed; z-index: -99; width: 100%; height: 100%">
		<iframe width="100%" height="100%" [src]="videoUrl" title="YouTube video player" frameborder="0" allow="autoplay;" referrerpolicy="strict-origin-when-cross-origin" style="pointer-events: none;" allowfullscreen></iframe>	
	</div>
-->